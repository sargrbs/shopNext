
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model User {
  id String @unique 
  name String
  email String @unique
  password String
  privilege String
  created_at DateTime @db.Date @default(now())
  updated_at DateTime @db.Date @updatedAt
}

model Token {
  id String @unique
  token String
  expireAt DateTime
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

model ProductStock {
  id String @unique
  quantity Int

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  productVariations ProductVariations?

}

model ProductVariations {
  id String @unique
  name String
  code String

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  productStockId String  @unique
  productStock ProductStock @relation(fields: [productStockId], references: [id])
  
  product Product @relation(fields: [productId], references: [id])
  productId String

  auxs VariationtOnAux[]
}

model Aux {
  id String @unique
  code String @unique
  name String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  variation VariationtOnAux[]
}

model VariationtOnAux {
  variation       ProductVariations   @relation(fields: [variationId], references: [id])
  variationId     String
  aux   Aux @relation(fields: [auxId], references: [id])
  auxId String
  assignedAt DateTime @default(now())
  assignedBy String

  @@id([variationId, auxId])
}

model Product {
  id String @unique
  codigo Int
  nome String
  observacao1 String
  observacao2 String
  observacao3 String
  tipo Int
  codigoClasse Int
  codigoSubclasse Int
  codigoCor Int
  codigoTamanho Int
  codigoGrupo Int
  codigoMoeda Int
  codigoFamilia Int
  codigoUnidadeVenda Int
  codigoPesquisa1 Int
  codigoPesquisa2 Int
  codigoPesquisa3 Int
  pesoLiquido Decimal  @db.Decimal(15,2)	
  pesoBruto Decimal  @db.Decimal(15,2)	
  altura Decimal  @db.Decimal(15,2)	
  largura Decimal  @db.Decimal(15,2)	
  comprimento Decimal  @db.Decimal(15,2)	
  estoqueAtual Decimal  @db.Decimal(15,2)	
  codigoFabricante Int
  codigoBarras String
  urlDetalhe String
  urlEstoqueDetalhe String
  urlTabelaPreco String
  urlPromocoes String
  urlFotos String

  
  ProductVariations ProductVariations[]

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}

